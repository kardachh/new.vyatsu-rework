<div class="font-[500] text-[24px] mb-[15px]">Текущий учебный план</div>
<div class="flex flex-col">
    <div class="flex items-center my-[10px]">
        <svg class="mr-[20px]" width="40" height="29" viewBox="0 0 40 29" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="8.75" r="3.75" fill="#C0E2EF"/>
            <path d="M36.2105 10C34.1053 13.125 29.2632 17.5 25.4737 17.5C25.4737 15 23.5789 7.5 27.3684 3.75C31.1579 0.625 37.9071 0 40 0C39.3684 5.625 37.4736 8.125 36.2105 10Z"
                  fill="#C0E2EF"/>
            <path d="M3.78947 10C5.89467 13.125 10.7368 17.5 14.5263 17.5C14.5263 15 16.4211 7.5 12.6316 3.75C8.84211 0.625 2.09287 0 5.96046e-07 0C0.63158 5.625 2.52635 8.125 3.78947 10Z"
                  fill="#C0E2EF"/>
            <path d="M28.75 22.5C27 25.625 25.8333 28.125 20.5833 28.75C17.0833 28.75 13 27.5 11.25 22.5C13 20.625 12.4167 21.25 14.75 18.75C15.9167 23.125 18.828 23.75 20.5833 23.75C21.75 23.75 24.0833 23.125 25.25 18.75C27 20.625 27 20.625 28.75 22.5Z"
                  fill="#C0E2EF"/>
        </svg>
        <div>Дисциплины формирующие общепрофессинальные компетенции</div>
    </div>
    <div class="flex items-center my-[10px]">
        <svg class="mr-[20px]" width="40" height="29" viewBox="0 0 40 29" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="8.75" r="3.75" fill="#FFF8B6"/>
            <path d="M36.2105 10C34.1053 13.125 29.2632 17.5 25.4737 17.5C25.4737 15 23.5789 7.5 27.3684 3.75C31.1579 0.625 37.9071 0 40 0C39.3684 5.625 37.4736 8.125 36.2105 10Z"
                  fill="#FFF8B6"/>
            <path d="M3.78947 10C5.89467 13.125 10.7368 17.5 14.5263 17.5C14.5263 15 16.4211 7.5 12.6316 3.75C8.84211 0.625 2.09287 0 5.96046e-07 0C0.63158 5.625 2.52635 8.125 3.78947 10Z"
                  fill="#FFF8B6"/>
            <path d="M28.75 22.5C27 25.625 25.8333 28.125 20.5833 28.75C17.0833 28.75 13 27.5 11.25 22.5C13 20.625 12.4167 21.25 14.75 18.75C15.9167 23.125 18.828 23.75 20.5833 23.75C21.75 23.75 24.0833 23.125 25.25 18.75C27 20.625 27 20.625 28.75 22.5Z"
                  fill="#FFF8B6"/>
        </svg>
        <div>Дисциплины формирующие общие (универсальные) компетенции</div>
    </div>
    <div class="flex items-center my-[10px]">
        <svg class="mr-[20px]" width="40" height="29" viewBox="0 0 40 29" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="8.75" r="3.75" fill="#E9BBFF"/>
            <path d="M36.2105 10C34.1053 13.125 29.2632 17.5 25.4737 17.5C25.4737 15 23.5789 7.5 27.3684 3.75C31.1579 0.625 37.9071 0 40 0C39.3684 5.625 37.4736 8.125 36.2105 10Z"
                  fill="#E9BBFF"/>
            <path d="M3.78947 10C5.89467 13.125 10.7368 17.5 14.5263 17.5C14.5263 15 16.4211 7.5 12.6316 3.75C8.84211 0.625 2.09287 0 5.96046e-07 0C0.63158 5.625 2.52635 8.125 3.78947 10Z"
                  fill="#E9BBFF"/>
            <path d="M28.75 22.5C27 25.625 25.8333 28.125 20.5833 28.75C17.0833 28.75 13 27.5 11.25 22.5C13 20.625 12.4167 21.25 14.75 18.75C15.9167 23.125 18.828 23.75 20.5833 23.75C21.75 23.75 24.0833 23.125 25.25 18.75C27 20.625 27 20.625 28.75 22.5Z"
                  fill="#E9BBFF"/>
        </svg>
        <div>Дисциплины формирующие факультативные компетенции</div>
    </div>
    <div class="flex items-center my-[10px]">
        <svg class="mr-[20px]" width="40" height="29" viewBox="0 0 40 29" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="8.75" r="3.75" fill="#C4EAAB"/>
            <path d="M36.2105 10C34.1053 13.125 29.2632 17.5 25.4737 17.5C25.4737 15 23.5789 7.5 27.3684 3.75C31.1579 0.625 37.9071 0 40 0C39.3684 5.625 37.4736 8.125 36.2105 10Z"
                  fill="#C4EAAB"/>
            <path d="M3.78947 10C5.89467 13.125 10.7368 17.5 14.5263 17.5C14.5263 15 16.4211 7.5 12.6316 3.75C8.84211 0.625 2.09287 0 5.96046e-07 0C0.63158 5.625 2.52635 8.125 3.78947 10Z"
                  fill="#C4EAAB"/>
            <path d="M28.75 22.5C27 25.625 25.8333 28.125 20.5833 28.75C17.0833 28.75 13 27.5 11.25 22.5C13 20.625 12.4167 21.25 14.75 18.75C15.9167 23.125 18.828 23.75 20.5833 23.75C21.75 23.75 24.0833 23.125 25.25 18.75C27 20.625 27 20.625 28.75 22.5Z"
                  fill="#C4EAAB"/>
        </svg>
        <div>Дисциплины формирующие профессинальные компетенции</div>
    </div>
</div>
<div class="font-[400] mt-[10px]">
    <span class="font-[600]">Зачетная еденица трудоемкости (ЗЕТ) -</span> единица трудоемкости учебной работы и других
    мероприятий в рамках образовательной программы
</div>

<div id="course-select" class="hidden lg:flex py-6 flex justify-between">
    <div id=course-all
         class="course py-[20px] w-full cursor-pointer rounded-2xl shadow-xl flex justify-center items-center mx-[20px]">
        <div>Все курсы</div>
    </div>
</div>

<div id="disciplines-table" class="mt-[30px] lg:mt-0 w-full rounded-2xl border overflow-hidden shadow-xl"></div>

<script>
    const mock = {
        courses: [
            {
                name: "1 курс",
                disciplines: [
                    {
                        name: "Дискретная математика 1",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 1",
                        type: 2,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 1",
                        type: 3,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 1",
                        type: 4,
                        zet: 3,
                        grade: "Экзамен"
                    },
                    {
                        name: "Дискретная математика 1",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                ]
            },
            {
                name: "2 курс",
                disciplines: [
                    {
                        name: "Дискретная математика 2",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 2",
                        type: 2,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 2",
                        type: 3,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 2",
                        type: 4,
                        zet: 3,
                        grade: "Экзамен"
                    },
                    {
                        name: "Дискретная математика 2",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                ]
            },
            {
                name: "3 курс",
                disciplines: [
                    {
                        name: "Дискретная математика 3",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 3",
                        type: 2,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 3",
                        type: 3,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 3",
                        type: 4,
                        zet: 3,
                        grade: "Экзамен"
                    },
                    {
                        name: "Дискретная математика 3",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                ]
            },
            {
                name: "4 курс",
                disciplines: [
                    {
                        name: "Дискретная математика 4",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 4",
                        type: 2,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 4",
                        type: 3,
                        zet: 3,
                        grade: "Зачет"
                    },
                    {
                        name: "Дискретная математика 4",
                        type: 4,
                        zet: 3,
                        grade: "Экзамен"
                    },
                    {
                        name: "Дискретная математика 4",
                        type: 1,
                        zet: 3,
                        grade: "Зачет"
                    },
                ]
            },
        ]
    }

    const getColor = (type) => {
        switch (type) {
            case 1:
                return '#C0E2EF'
            case 2:
                return '#FFF8B6'
            case 3:
                return '#E9BBFF'
            case 4:
                return '#C4EAAB'
        }
    }

    let selectedCourse = 'all';

    const setSelectedCourse = (course) => {
        selectedCourse = course
        $('.course').removeClass('shadow-xl text-white bg-[#2E9ECB]')
        $(`#course-${selectedCourse}`).addClass('shadow-xl')
        $(`#course-${selectedCourse}-mobile`).addClass('bg-[#2E9ECB] text-white');

        //    filter
        if (course === 'all') {
            $(`.discipline`).removeClass('lg:hidden')
            $(`.discipline-mobile`).removeClass('hidden')
        } else {
            $(`.discipline:not(.discipline-${course})`).addClass('lg:hidden')
            $(`.discipline-mobile:not(.discipline-${course})`).addClass('hidden')

            $(`.discipline.discipline-${course}`).removeClass('lg:hidden')
            $(`.discipline-mobile.discipline-${course}`).removeClass('hidden')
        }
    }

    const generateCoursesRow = (data) => {
        const row = $('#course-select')
        data.courses.map((course, index) => {
            const courseEl = document.createElement('div')
            courseEl.id = `course-${index + 1}`
            courseEl.classList.add("course", "py-[20px]", "w-full", "cursor-pointer", "rounded-2xl", 'flex', 'justify-center', 'items-center', "mx-[20px]");
            courseEl.innerHTML = `
                <div>${course.name}</div>
            `
            row.append(courseEl)
        })

    }

    generateCoursesRow(mock)

    const generateTable = (data) => {
        const table = $("#disciplines-table")[0];
        console.log(table)

        const coursesMobile = data.courses.map((course, index) => {
            return `<div id="course-${index + 1}-mobile" class="course text-center py-[10px]">${course.name}</div>`
        }).join('')

        const disciplinesDesktop = data.courses.map((course, index) => {
            return course.disciplines.map((discipline) => {
                return `<div class="discipline discipline-${index + 1}  hidden lg:grid lg:grid-cols-4">
                            <div class="col-span-2  border pl-10 py-[20px]">${discipline.name}</div>
                            <div class="border text-center py-[20px] flex justify-center items-center bg-[${getColor(discipline.type)}]">${discipline.zet}</div>
                            <div class="border text-center py-[20px] flex justify-center items-center bg-[${getColor(discipline.type)}]">${discipline.grade}</div>
                        </div>`
            }).join('')
        }).join('')

        const disciplinesMobile = data.courses.map((course, index) => {
            return course.disciplines.map((discipline) => {
                return `<div class = "grid lg:hidden grid-cols-2 discipline-mobile discipline-${index + 1}">
                            <div class="col-span-2 border pl-4 py-[10px]">${discipline.name}</div>
                            <div class="border text-center py-[10px] flex justify-center items-center bg-[${getColor(discipline.type)}]">${discipline.zet}</div>
                            <div class="border text-center py-[10px] flex justify-center items-center bg-[${getColor(discipline.type)}]">${discipline.grade}</div>
                        </div>`
            }).join('')
        }).join('')

        table.innerHTML += `
            <!-- desktop -->
            <div class="hidden lg:grid grid-cols-4 grid-gap-0">
                    <div class=" border pl-10 py-[20px] col-span-2 flex justify-center items-center"><div>Дисциплина</div></div>
                    <div class=" border text-center flex justify-center items-center"><div>ЗЕТ</div></div>
                    <div class=" border text-center flex justify-center items-center">Оценка зананий</div>
            </div>
            <!-- mobile  -->
            <div class="lg:hidden grid grid-cols-${data.courses.length}">
                ${coursesMobile}
            </div>
            <div class="lg:hidden grid grid-cols-2">
                <div class=" border text-center py-[10px]">ЗЕТ</div>
                <div class="border text-center py-[10px]">Оценка зананий</div>
            </div>

            ${disciplinesDesktop}

            ${disciplinesMobile}
        `

    }

    $(document).ready(() => {
        generateTable(mock)
        $('.course').click(e => setSelectedCourse(e.currentTarget.id.split('-')[1]))
        if ($(window).width() < 1024)
            setSelectedCourse(1)
        $(window).resize(() => {
            if ($(window).width() <= 1024 && selectedCourse === 'all') {
                setSelectedCourse(1)
            }
        });
    })

</script>
